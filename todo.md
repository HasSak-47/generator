# TODO

- [ ] `src/main.rs:49-74` – The CLI always writes files and the non-split branch pushes `{prefix}generted` (typo) under whatever `--path` directory is provided without creating missing directories. Fix the typo, allow writing to stdout (per README), and ensure the destination directory exists before creating files.
- [ ] `src/generators/python.rs:45-128` – Most of the FastAPI generator is still `todo!()`: unions inside `handle_type`, type emission, and conversion helpers all panic on real inputs. Flesh out the generator so choosing `python-fast-api` doesn’t crash as soon as a type definition is encountered.
- [ ] `src/generators/ts.rs:210-217` – `emit_error_branch` generates invalid TypeScript for the `pair` strategy (`return [...]);`). Fix the extra parenthesis and return `[error, null]`/`[null, error]` as intended.
- [ ] `src/generators/ts.rs:251-330` – Both struct/union translation helpers are inconsistent: `generate_struct_translation` always builds a `wire_m` object even when producing `into_domain_*`, and `generate_union_translation` is unimplemented. Implement proper domain↔wire conversions for structs and unions so generated helpers compile.
- [ ] `src/generators/ts.rs:330-341` – `generate_type` only supports structs and unions before `todo!()`. Type aliases to primitives, arrays, optionals, etc. currently crash the generator; extend it to cover every `Type` variant the DSL can produce.
- [ ] `src/generators/ts.rs:473-483` – Endpoint generation always calls `into_domain_{endpoint_name}(j)` for struct responses, which does not exist. Determine the actual return type name (including `_` wire aliases) and call the correct translator before returning data.
- [ ] `pest/lang.pest:33-41` & `src/parser/dsl.rs:24-120` – The grammar allows `map_type` and only handles two-arm unions, but `handle_type` ignores map types and assumes any number of union arms. Align the grammar and parser so valid DSL inputs don’t fail or silently mis-parse.
- [ ] `src/tests/parse_test.rs:14-21` – The unit test writes artifacts to `<repo>/generated/generated.ts`, polluting the workspace. Use `tempfile`/`tempdir` or write into `std::env::temp_dir()` so `cargo test` stays hermetic.
