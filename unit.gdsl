type Used = {
    id: uint,
    by: string,
}

type Down = {
    by: string,
}

type State = {
    state: {Used | Down},
    id: uint,
}

type Bar = {
    name: string,
    tags: string[]?,
}

put_example(name: string, date: string as datetime) @get "/message/"
get_bar_state(name: string) @get "/bar/{name}/state" -> State
get_bar_id(bar: Bar) @get "/bar/id" -> uint
get_states_from_bar(bar: Bar) @get "/bar/from/baz" -> Bar[]
